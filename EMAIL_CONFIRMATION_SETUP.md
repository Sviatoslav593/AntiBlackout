# üìß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è email –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å

## üéØ –û–≥–ª—è–¥

–°—Ç–≤–æ—Ä–µ–Ω–æ Supabase Edge Function –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ–≥–æ email –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º –ø—ñ—Å–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
supabase/
‚îú‚îÄ‚îÄ functions/
‚îÇ   ‚îî‚îÄ‚îÄ send-order-confirmation/
‚îÇ       ‚îú‚îÄ‚îÄ index.ts                    # –û—Å–Ω–æ–≤–Ω–∞ Edge Function
‚îÇ       ‚îú‚îÄ‚îÄ index-nodemailer.ts         # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –≤–µ—Ä—Å—ñ—è –∑ nodemailer
‚îÇ       ‚îú‚îÄ‚îÄ deno.json                   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Deno
‚îÇ       ‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Edge Function
‚îú‚îÄ‚îÄ config.toml                         # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Supabase
src/app/api/
‚îî‚îÄ‚îÄ send-confirmation/
    ‚îî‚îÄ‚îÄ route.ts                        # Next.js API endpoint
```

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Supabase CLI

```bash
npm install -g supabase
```

### 2. –õ–æ–≥—ñ–Ω –≤ Supabase

```bash
supabase login
```

### 3. –î–µ–ø–ª–æ–π Edge Function

```bash
supabase functions deploy send-order-confirmation
```

### 4. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
# –î–ª—è Gmail SMTP
supabase secrets set SMTP_USER=your-gmail@gmail.com
supabase secrets set SMTP_PASS=your-app-password

# –ê–±–æ –¥–ª—è Resend API (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
supabase secrets set RESEND_API_KEY=re_xxxxxxxxx
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è email —Å–µ—Ä–≤—ñ—Å—ñ–≤

### –í–∞—Ä—ñ–∞–Ω—Ç 1: Gmail SMTP (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)

1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ Gmail
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è" ‚Üí "–ë–µ–∑–ø–µ–∫–∞"
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å "2-—Ñ–∞–∫—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è"
4. –°—Ç–≤–æ—Ä—ñ—Ç—å "–ü–∞—Ä–æ–ª—å –¥–æ–¥–∞—Ç–∫—É" –¥–ª—è SMTP
5. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ:
   ```bash
   SMTP_USER=your-gmail@gmail.com
   SMTP_PASS=your-app-password
   ```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: Resend API (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –Ω–∞ [resend.com](https://resend.com)
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á
3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É:
   ```bash
   RESEND_API_KEY=re_xxxxxxxxx
   ```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: SMTP2GO (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –Ω–∞ [smtp2go.com](https://smtp2go.com)
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á
3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É:
   ```bash
   SMTP2GO_API_KEY=api-xxxxxxxxx
   ```

## üìß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ email

### –ó–∞–≥–æ–ª–æ–≤–æ–∫

- ‚ö° –õ–æ–≥–æ—Ç–∏–ø "AntiBlackout"
- –ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è

### –û—Å–Ω–æ–≤–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞

- –ù–æ–º–µ—Ä –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –°—Ç–∞—Ç—É—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –î–µ—Ç–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è —Ç–æ–≤–∞—Ä—ñ–≤
- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞
- –ö–Ω–æ–ø–∫–∞ "–í—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è"

### –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫

- –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- –ü—Ä–æ—Ü–µ—Å –æ–±—Ä–æ–±–∫–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

### –§—É—Ç–µ—Ä

- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- Email, Telegram, –∞–¥—Ä–µ—Å–∞
- –ü–æ–¥—è–∫–∞ –∫–ª—ñ—î–Ω—Ç—É

## üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

Email –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `/api/order` endpoint.

### –†—É—á–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

```typescript
const response = await fetch("/api/send-confirmation", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    order: {
      id: "order-123",
      status: "pending",
      total_price: 2500,
      items: [
        {
          name: "PowerMax 20000–º–ê–≥",
          quantity: 2,
          price: 1200,
        },
      ],
    },
    customer: {
      email: "customer@example.com",
      name: "–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ",
    },
  }),
});
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
supabase start

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Edge Function
node test-email-function.js
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ

```bash
# –î–µ–ø–ª–æ–π Edge Function
supabase functions deploy send-order-confirmation

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ API
curl -X POST https://your-project.supabase.co/functions/v1/send-order-confirmation \
  -H "Authorization: Bearer YOUR_ANON_KEY" \
  -H "Content-Type: application/json" \
  -d '{"order": {...}, "customer": {...}}'
```

## üìä –ü–µ—Ä–µ–≤–∞–≥–∏

### –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

- ‚úÖ –ú–∏—Ç—Ç—î–≤–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –ó—Ä—É—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –≤–∏–≥–ª—è–¥

### –î–ª—è –±—ñ–∑–Ω–µ—Å—É

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—É
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è UX
- ‚úÖ –ó–±—ñ–ª—å—à–µ–Ω–Ω—è –¥–æ–≤—ñ—Ä–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤

## üîí –ë–µ–∑–ø–µ–∫–∞

### –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è credentials
- ‚úÖ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### –û–±–º–µ–∂–µ–Ω–Ω—è

- ‚úÖ Rate limiting
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è email –∞–¥—Ä–µ—Å
- ‚úÖ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–ø–∞–º—É

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Edge Function –≤ Supabase Dashboard
- –í—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ email
- –ú–æ–Ω—ñ—Ç–æ—Ä—É–π—Ç–µ –ø–æ–º–∏–ª–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏

- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö email
- –ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–º–∏–ª–æ–∫

## üõ†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∞ –¥–∏–∑–∞–π–Ω—É email

–†–µ–¥–∞–≥—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `createEmailHTML()` –≤ `index.ts`

### –ó–º—ñ–Ω–∞ —Ç–µ–∫—Å—Ç—É

–û–Ω–æ–≤—ñ—Ç—å —à–∞–±–ª–æ–Ω email –≤ —Ñ—É–Ω–∫—Ü—ñ—ó `createEmailHTML()`

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤

–†–æ–∑—à–∏—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ `Order` —Ç–∞ `Customer`

## üÜò –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### Email –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ SMTP credentials –ø—Ä–∞–≤–∏–ª—å–Ω—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Edge Function

### –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è –ø–µ—Ä–µ–¥–∞–Ω—ñ
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç email –∞–¥—Ä–µ—Å–∏
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ UTF-8 –∫–æ–¥—É–≤–∞–Ω–Ω—è
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ HTML –≤–∞–ª—ñ–¥–Ω–∏–π
3. –¢–µ—Å—Ç—É–π—Ç–µ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö email –∫–ª—ñ—î–Ω—Ç–∞—Ö

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é Supabase Edge Functions
2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ

---

**–í–µ—Ä—Å—ñ—è**: 1.0.0  
**–î–∞—Ç–∞**: 5 —Å—ñ—á–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
