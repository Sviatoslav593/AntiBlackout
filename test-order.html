<!DOCTYPE html>
<html>
  <head>
    <title>Test Order API</title>
  </head>
  <body>
    <h1>Test Order API</h1>
    <button onclick="testOrder()">Test Order Submission</button>
    <div id="result"></div>

    <script>
      async function testOrder() {
        const orderData = {
          customer: {
            name: "–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤–∏—á",
            firstName: "–¢–µ—Å—Ç",
            lastName: "–¢–µ—Å—Ç–æ–≤–∏—á",
            phone: "+380123456789",
            email: "test@example.com",
            address: "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1",
            paymentMethod: "online",
            city: "–ö–∏—ó–≤",
            cityRef: "test-ref",
            warehouse: "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1",
            warehouseRef: "test-warehouse-ref",
            customAddress: "",
          },
          items: [
            {
              id: 1,
              name: "–¢–µ—Å—Ç–æ–≤–∏–π —Ç–æ–≤–∞—Ä",
              price: 100,
              quantity: 1,
            },
          ],
          total: 100,
          itemCount: 1,
          orderDate: new Date().toISOString(),
        };

        try {
          console.log("üì§ Sending test order:", orderData);

          const response = await fetch("/api/order", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(orderData),
          });

          console.log("üì• Response status:", response.status);

          const result = await response.json();
          console.log("üì• Response data:", result);

          document.getElementById("result").innerHTML = `<h3>Result:</h3>
                     <p>Status: ${response.status}</p>
                     <p>Success: ${response.ok}</p>
                     <pre>${JSON.stringify(result, null, 2)}</pre>`;
        } catch (error) {
          console.error("‚ùå Error:", error);
          document.getElementById(
            "result"
          ).innerHTML = `<h3>Error:</h3><p>${error.message}</p>`;
        }
      }
    </script>
  </body>
</html>
