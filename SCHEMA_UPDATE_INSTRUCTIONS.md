# üîß –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ö–µ–º–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–∑–≤ —Ç–æ–≤–∞—Ä—ñ–≤

## ‚ùå –ü–æ—Ç–æ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞

API –ø—Ä–∞—Ü—é—î, –∞–ª–µ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î –Ω–∞–∑–≤–∏ —Ç–æ–≤–∞—Ä—ñ–≤ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–æ–ª–æ–Ω–æ–∫ `product_name` —Ç–∞ `product_price` –≤ —Ç–∞–±–ª–∏—Ü—ñ `order_items`.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞: https://supabase.com/dashboard
2. –£–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç
3. –í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç: `gtizpymstxfjyidhzygd`

### –ö—Ä–æ–∫ 2: –í—ñ–¥–∫—Ä–∏–π—Ç–µ SQL Editor

1. –í –ª—ñ–≤–æ–º—É –º–µ–Ω—é –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **"SQL Editor"**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"New query"** (–ù–æ–≤–∏–π –∑–∞–ø–∏—Ç)

### –ö—Ä–æ–∫ 3: –í–∏–∫–æ–Ω–∞–π—Ç–µ SQL

–°–∫–æ–ø—ñ—é–π—Ç–µ —Ç–∞ –≤—Å—Ç–∞–≤—Ç–µ –Ω–∞–≤–µ–¥–µ–Ω–∏–π –Ω–∏–∂—á–µ SQL –∫–æ–¥:

```sql
-- Add new columns to order_items table
ALTER TABLE order_items
ADD COLUMN IF NOT EXISTS product_name TEXT,
ADD COLUMN IF NOT EXISTS product_price NUMERIC;

-- Update existing records to have product_name and product_price
UPDATE order_items
SET
  product_name = 'Unknown Product',
  product_price = price
WHERE product_name IS NULL;

-- Make product_name NOT NULL for new records
ALTER TABLE order_items
ALTER COLUMN product_name SET NOT NULL;

-- Make product_price NOT NULL for new records
ALTER TABLE order_items
ALTER COLUMN product_price SET NOT NULL;
```

### –ö—Ä–æ–∫ 4: –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Run"

–í–∏–∫–æ–Ω–∞–π—Ç–µ SQL –∑–∞–ø–∏—Ç.

## üß™ –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ö–µ–º–∏

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ö–µ–º—É:

```bash
npm run check:order-items
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚úÖ Insert test successful - schema is correct!
```

### 2. –û–Ω–æ–≤—ñ—Ç—å –∫–æ–¥ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–æ–ª–æ–Ω–æ–∫:

```bash
# –í—ñ–¥–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ —Ä—è–¥–∫–∏ –≤ src/services/orders.ts
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:

```bash
node test-order-with-product-names.js
```

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É –ø—ñ—Å–ª—è —Å—Ö–µ–º–∏

### 1. –í—ñ–¥–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ —Ä—è–¥–∫–∏ –≤ `src/services/orders.ts`:

```typescript
// Create order items
const orderItems = orderData.items.map((item) => ({
  order_id: order.id,
  product_id: item.product_id,
  product_name: item.product_name, // ‚úÖ –í—ñ–¥–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏
  product_price: item.product_price, // ‚úÖ –í—ñ–¥–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏
  quantity: item.quantity,
  price: item.price,
}));
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:

```bash
npm run dev
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### –¢–∞–±–ª–∏—Ü—è `order_items` –±—É–¥–µ –º—ñ—Å—Ç–∏—Ç–∏:

- ‚úÖ `id` - UUID (–ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á)
- ‚úÖ `order_id` - ID –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ `product_id` - ID —Ç–æ–≤–∞—Ä—É (–º–æ–∂–µ –±—É—Ç–∏ NULL)
- ‚úÖ `product_name` - **–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–∫—É–ø–∫–∏**
- ‚úÖ `product_price` - **–¶—ñ–Ω–∞ —Ç–æ–≤–∞—Ä—É –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–∫—É–ø–∫–∏**
- ‚úÖ `quantity` - –ö—ñ–ª—å–∫—ñ—Å—Ç—å
- ‚úÖ `price` - –ó–∞–≥–∞–ª—å–Ω–∞ —Ü—ñ–Ω–∞
- ‚úÖ `created_at` - –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–Ü—Å—Ç–æ—Ä–∏—á–Ω–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å** - –Ω–∞–∑–≤–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–∫—É–ø–∫–∏
2. **–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å** - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ç–æ–≤–∞—Ä –≤–∏–¥–∞–ª–µ–Ω–∏–π
3. **–ü–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è** - –≤—Å—ñ –¥–∞–Ω—ñ –ø—Ä–æ —Ç–æ–≤–∞—Ä –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ

## üîß –î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

- `npm run check:order-items` - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω—É —Å—Ö–µ–º—É
- `npm run update:schema` - –ü–æ–∫–∞–∑–∞—Ç–∏ SQL –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- `node test-order-with-product-names.js` - –¢–µ—Å—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `npm run test:supabase` - –¢–µ—Å—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

## ‚úÖ –°—Ç–∞—Ç—É—Å

- ‚úÖ API –ø—Ä–∞—Ü—é—î (—Ç–∏–º—á–∞—Å–æ–≤–æ –±–µ–∑ –Ω–∞–∑–≤ —Ç–æ–≤–∞—Ä—ñ–≤)
- ‚è≥ –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ SQL –≤ Supabase Dashboard
- ‚è≥ –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥ –ø—ñ—Å–ª—è —Å—Ö–µ–º–∏
- ‚è≥ –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –ø–æ–≤–Ω—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

---

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫**: –í–∏–∫–æ–Ω–∞–π—Ç–µ SQL –≤ Supabase Dashboard –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–ª–æ–Ω–æ–∫ `product_name` —Ç–∞ `product_price`.
